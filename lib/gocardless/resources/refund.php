<?php
{{ $resource := .Title }}
/**
  * WARNING: Do not edit by hand, this file was generated by Crank:
  *
  * https://github.com/gocardless/crank
  */

namespace {{ $root.Config.module_name }};

/**
{{ Commentify .Description "  * " 80 }}
  */
class {{ $propName | Camelize }} extends Base
{
  {{ range .Links }}
  /**
{{ Commentify .Description "    * " 80 }}
    *
    *  Example URL: {{ .Uri }}{{ range $paramName, $paramDetails := .UriParams }}
    *  
    *  @param {{ $paramName }}: {{ Commentify $paramDetails.description "" 60 }}{{ end }}
    **/
    
    public function do{{ .Rel | RelToMethodName }}({{ range $paramName, $paramDetails := .UriParams}}${{ $paramName | ToLower | Underscore}}, {{ end }}$options = array()) {

      {{ if eq (len .UriParams) 0 }}return $this->makeRequest("{{ .Method | ToLower}}", "{{ .Uri }}", $options);{{ else }}$path = $this->subUrl("{{ .Uri }}", array({{ range $paramName, $paramDetails := .UriParams }}
        "{{ $paramName | ToLower | Underscore }}" => ${{ $paramName | ToLower | Underscore }}{{ end }}
      ));

      return $this->makeRequest("{{ .Method | ToLower }}", $path, $options);{{ end }}
    }
{{ end }}

  /**
    *  Get the key the response object is enclosed in in JSON.
    */
    public function envelopeKey() {
      return "{{ .Title | ToLower | Pluralize | Underscore }}";
    }

}