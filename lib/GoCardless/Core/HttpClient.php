<?php
/**
 * WARNING: Do not edit by hand, this file was generated by Crank:
 *
 *   https://github.com/gocardless/crank
 */

namespace GoCardless\Core;

class HttpClient
{
  //  GoCardless Enterprise API

    private $auth;
    private $baseUrl;
    private $headers = array();

    public function __construct($api_key, $api_secret, $baseUrl, $options = array())
    {
        $this->baseUrl = $baseUrl;
        $this->auth = $api_key . ":" . $api_secret;

        $this->headers = array();
        if (isset($options['default_headers'])) {
            $this->headers = $options['default_headers'];
        }

        // Set Accept Header
        $this->headers['accept'] = 'application/json';

        // Config Headers
        $this->headers['GoCardless-Version'] = '2014-11-03';
        
    }

    public function getHeaders()
    {
        return $this->headers;
    }

    public function getBaseUrl()
    {
        return $this->baseUrl;
    }

    public function makeRequest($envelopeKey)
    {
        return new Request($this, $envelopeKey);
    }

    public function runCurlRequest($method, $path, $postBody)
    {
        $httpRequest = new CurlWrapper($method, $this->baseUrl . substr($path, 1));

        $httpRequest->setAuth($this->auth);
        $httpRequest->setHeaders($this->headers);

        if (isset($postBody)) {
            $httpRequest->setPostBody($postBody, 'application/json');
        }

        return $httpRequest->run();
    }
}
